import{oP as s,ox as g,ol as l,ou as v,ot as L,ow as p,oA as y,oN as N,aF as b,cR as I,p4 as M,oz as f,oS as P,oR as O,oT as Z,b7 as $,or as E,y as F,oU as B,os as K,cS as j,cy as J,c_ as X}from"./vendor.508dc62e.js";import{c as m,g as x,h as d,l as _,i as H,j as Q,k as S}from"./arcadeUtils.dd0c34f0.js";import{disjoint as Y,intersects as nn,touches as tn,crosses as en,within as rn,contains as on,overlaps as an,equals as un,relate as sn,intersect as cn,union as fn,difference as ln,symmetricDifference as gn,clip as dn,cut as hn,planarArea as q,geodesicArea as T,planarLength as z,geodesicLength as k,distance as wn,densify as W,geodesicDensify as C,generalize as mn,buffer as An,geodesicBuffer as pn,offset as yn,rotate as D,simplify as G,isSimple as En}from"./geometryEngineAsync.ca2550a6.js";function U(t){return B.indexOf("4.")===0?F.fromExtent(t):new F({spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}function A(t){if(g(t,2,2),!(t[0]instanceof l&&t[1]instanceof l)){if(!(t[0]instanceof l&&t[1]===null)){if(!(t[1]instanceof l&&t[0]===null)){if(t[0]!==null||t[1]!==null)throw new Error("Illegal Argument")}}}}async function V(t,r){if(t.type!=="polygon"&&t.type!=="polyline"&&t.type!=="extent")return 0;let i=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(i=Q(t.spatialReference)/X(t.spatialReference));let a=0;if(t.type==="polyline")for(const n of t.paths)for(let e=1;e<n.length;e++)a+=S(n[e],n[e-1],i);else if(t.type==="polygon")for(const n of t.rings){for(let e=1;e<n.length;e++)a+=S(n[e],n[e-1],i);(n[0][0]!==n[n.length-1][0]||n[0][1]!==n[n.length-1][1]||n[0][2]!==void 0&&n[0][2]!==n[n.length-1][2])&&(a+=S(n[0],n[n.length-1],i))}else t.type==="extent"&&(a+=2*S([t.xmin,t.ymin,0],[t.xmax,t.ymin,0],i),a+=2*S([t.xmin,t.ymin,0],[t.xmin,t.ymax,0],i),a*=2,a+=4*Math.abs(f(t.zmax,0)*i-f(t.zmin,0)*i));const u=new I({hasZ:!1,hasM:!1,spatialReference:t.spatialReference,paths:[[0,0],[0,a]]});return z(u,r)}function bn(t){t.mode==="async"&&(t.functions.disjoint=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]===null||n[1]===null||Y(n[0],n[1])})},t.functions.intersects=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]!==null&&n[1]!==null&&nn(n[0],n[1])})},t.functions.touches=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]!==null&&n[1]!==null&&tn(n[0],n[1])})},t.functions.crosses=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]!==null&&n[1]!==null&&en(n[0],n[1])})},t.functions.within=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]!==null&&n[1]!==null&&rn(n[0],n[1])})},t.functions.contains=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]!==null&&n[1]!==null&&on(n[0],n[1])})},t.functions.overlaps=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]!==null&&n[1]!==null&&an(n[0],n[1])})},t.functions.equals=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return g(n,2,2),n[0]===n[1]||(n[0]instanceof l&&n[1]instanceof l?un(n[0],n[1]):!(!v(n[0])||!v(n[1]))&&n[0].getTime()===n[1].getTime())})},t.functions.relate=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,3,3),n[0]instanceof l&&n[1]instanceof l)return sn(n[0],n[1],L(n[2]));if(n[0]instanceof l&&n[1]===null||n[1]instanceof l&&n[0]===null||n[0]===null&&n[1]===null)return!1;throw new Error("Illegal Argument")})},t.functions.intersection=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]===null||n[1]===null?null:cn(n[0],n[1])})},t.functions.union=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){const e=[];if((n=s(n)).length===0)throw new Error("Function called with wrong number of Parameters");if(n.length===1)if(p(n[0])){const o=s(n[0]);for(let c=0;c<o.length;c++)if(o[c]!==null){if(!(o[c]instanceof l))throw new Error("Illegal Argument");e.push(o[c])}}else{if(!y(n[0])){if(n[0]instanceof l)return N(m(n[0]),r.spatialReference);if(n[0]===null)return null;throw new Error("Illegal Argument")}{const o=s(n[0].toArray());for(let c=0;c<o.length;c++)if(o[c]!==null){if(!(o[c]instanceof l))throw new Error("Illegal Argument");e.push(o[c])}}}else for(let o=0;o<n.length;o++)if(n[o]!==null){if(!(n[o]instanceof l))throw new Error("Illegal Argument");e.push(n[o])}return e.length===0?null:fn(e)})},t.functions.difference=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]!==null&&n[1]===null?m(n[0]):n[0]===null?null:ln(n[0],n[1])})},t.functions.symmetricdifference=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){return A(n=s(n)),n[0]===null&&n[1]===null?null:n[0]===null?m(n[1]):n[1]===null?m(n[0]):gn(n[0],n[1])})},t.functions.clip=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,2),!(n[1]instanceof b)&&n[1]!==null)throw new Error("Illegal Argument");if(n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");return n[1]===null?null:dn(n[0],n[1])})},t.functions.cut=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,2),!(n[1]instanceof I)&&n[1]!==null)throw new Error("Illegal Argument");if(n[0]===null)return[];if(!(n[0]instanceof l))throw new Error("Illegal Argument");return n[1]===null?[m(n[0])]:hn(n[0],n[1])})},t.functions.area=function(r,i){return t.standardFunctionAsync(r,i,async function(a,u,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(M(n[0])){const e=await n[0].sumArea(x(f(n[1],-1)),!1,r.abortSignal);if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}if(p(n[0])||y(n[0])){const e=P(n[0],r.spatialReference);return e===null?0:q(e,x(f(n[1],-1)))}if(!(n[0]instanceof l))throw new Error("Illegal Argument");return q(n[0],x(f(n[1],-1)))})},t.functions.areageodetic=function(r,i){return t.standardFunctionAsync(r,i,async function(a,u,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(M(n[0])){const e=await n[0].sumArea(x(f(n[1],-1)),!0,r.abortSignal);if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}if(p(n[0])||y(n[0])){const e=P(n[0],r.spatialReference);return e===null?0:T(e,x(f(n[1],-1)))}if(!(n[0]instanceof l))throw new Error("Illegal Argument");return T(n[0],x(f(n[1],-1)))})},t.functions.length=function(r,i){return t.standardFunctionAsync(r,i,async function(a,u,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(M(n[0])){const e=await n[0].sumLength(d(f(n[1],-1)),!1,r.abortSignal);if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}if(p(n[0])||y(n[0])){const e=O(n[0],r.spatialReference);return e===null?0:z(e,d(f(n[1],-1)))}if(!(n[0]instanceof l))throw new Error("Illegal Argument");return z(n[0],d(f(n[1],-1)))})},t.functions.length3d=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(p(n[0])||y(n[0])){const e=O(n[0],r.spatialReference);return e===null?0:e.hasZ===!0?V(e,d(f(n[1],-1))):z(e,d(f(n[1],-1)))}if(!(n[0]instanceof l))throw new Error("Illegal Argument");return n[0].hasZ===!0?V(n[0],d(f(n[1],-1))):z(n[0],d(f(n[1],-1)))})},t.functions.lengthgeodetic=function(r,i){return t.standardFunctionAsync(r,i,async function(a,u,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(M(n[0])){const e=await n[0].sumLength(d(f(n[1],-1)),!0,r.abortSignal);if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}if(p(n[0])||y(n[0])){const e=O(n[0],r.spatialReference);return e===null?0:k(e,d(f(n[1],-1)))}if(!(n[0]instanceof l))throw new Error("Illegal Argument");return k(n[0],d(f(n[1],-1)))})},t.functions.distance=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){n=s(n),g(n,2,3);let e=n[0];(p(n[0])||y(n[0]))&&(e=Z(n[0],r.spatialReference));let o=n[1];if((p(n[1])||y(n[1]))&&(o=Z(n[1],r.spatialReference)),!(e instanceof l))throw new Error("Illegal Argument");if(!(o instanceof l))throw new Error("Illegal Argument");return wn(e,o,d(f(n[2],-1)))})},t.functions.distancegeodetic=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){n=s(n),g(n,2,3);const e=n[0],o=n[1];if(!(e instanceof $))throw new Error("Illegal Argument");if(!(o instanceof $))throw new Error("Illegal Argument");const c=new I({paths:[],spatialReference:e.spatialReference});return c.addPath([e,o]),k(c,d(f(n[2],-1)))})},t.functions.densify=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");if(e<=0)throw new Error("Illegal Argument");return n[0]instanceof F||n[0]instanceof I?W(n[0],e,d(f(n[2],-1))):n[0]instanceof b?W(U(n[0]),e,d(f(n[2],-1))):n[0]})},t.functions.densifygeodetic=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");if(e<=0)throw new Error("Illegal Argument");return n[0]instanceof F||n[0]instanceof I?C(n[0],e,d(f(n[2],-1))):n[0]instanceof b?C(U(n[0]),e,d(f(n[2],-1))):n[0]})},t.functions.generalize=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,4),n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");return mn(n[0],e,K(f(n[2],!0)),d(f(n[3],-1)))})},t.functions.buffer=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");return e===0?m(n[0]):An(n[0],e,d(f(n[2],-1)))})},t.functions.buffergeodetic=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");return e===0?m(n[0]):pn(n[0],e,d(f(n[2],-1)))})},t.functions.offset=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,2,6),n[0]===null)return null;if(!(n[0]instanceof F||n[0]instanceof I))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");const o=E(f(n[4],10));if(isNaN(o))throw new Error("Illegal Argument");const c=E(f(n[5],0));if(isNaN(c))throw new Error("Illegal Argument");return yn(n[0],e,d(f(n[2],-1)),L(f(n[3],"round")).toLowerCase(),o,c)})},t.functions.rotate=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){n=s(n),g(n,2,3);let e=n[0];if(e===null)return null;if(!(e instanceof l))throw new Error("Illegal Argument");e instanceof b&&(e=F.fromExtent(e));const o=E(n[1]);if(isNaN(o))throw new Error("Illegal Argument");const c=f(n[2],null);if(c===null)return D(e,o);if(c instanceof $)return D(e,o,c);throw new Error("Illegal Argument")})},t.functions.centroid=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,1,1),n[0]===null)return null;let e=n[0];if((p(n[0])||y(n[0]))&&(e=Z(n[0],r.spatialReference)),e===null)return null;if(!(e instanceof l))throw new Error("Illegal Argument");return e instanceof $?N(m(n[0]),r.spatialReference):e instanceof F?e.centroid:e instanceof I?_(e):e instanceof j?H(e):e instanceof b?e.center:null})},t.functions.multiparttosinglepart=function(r,i){return t.standardFunctionAsync(r,i,async function(a,u,n){n=s(n),g(n,1,1);const e=[];if(n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");if(n[0]instanceof $)return[N(m(n[0]),r.spatialReference)];if(n[0]instanceof b)return[N(m(n[0]),r.spatialReference)];const o=await G(n[0]);if(o instanceof F){const c=[],w=[];for(let h=0;h<o.rings.length;h++)if(o.isClockwise(o.rings[h])){const R=J({rings:[o.rings[h]],hasZ:o.hasZ===!0,hazM:o.hasM===!0,spatialReference:o.spatialReference.toJSON()});c.push(R)}else w.push({ring:o.rings[h],pt:o.getPoint(h,0)});for(let h=0;h<w.length;h++)for(let R=0;R<c.length;R++)if(c[R].contains(w[h].pt)){c[R].addRing(w[h].ring);break}return c}if(o instanceof I){const c=[];for(let w=0;w<o.paths.length;w++){const h=J({paths:[o.paths[w]],hasZ:o.hasZ===!0,hazM:o.hasM===!0,spatialReference:o.spatialReference.toJSON()});c.push(h)}return c}if(n[0]instanceof j){const c=N(m(n[0]),r.spatialReference);for(let w=0;w<c.points.length;w++)e.push(c.getPoint(w));return e}return null})},t.functions.issimple=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,1,1),n[0]===null)return!0;if(!(n[0]instanceof l))throw new Error("Illegal Argument");return En(n[0])})},t.functions.simplify=function(r,i){return t.standardFunctionAsync(r,i,function(a,u,n){if(n=s(n),g(n,1,1),n[0]===null)return null;if(!(n[0]instanceof l))throw new Error("Illegal Argument");return G(n[0])})})}export{bn as registerFunctions};
