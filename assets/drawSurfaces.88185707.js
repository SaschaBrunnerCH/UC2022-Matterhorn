var pt=Object.defineProperty,ct=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var dt=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;var Ie=(e,t,i)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,M=(e,t)=>{for(var i in t||(t={}))dt.call(t,i)&&Ie(e,i,t[i]);if(Re)for(var i of Re(t))ut.call(t,i)&&Ie(e,i,t[i]);return e},E=(e,t)=>ct(e,ht(t));import{b9 as j,H as p,rR as Le,rS as gt,rT as mt,aE as V,pX as De,kf as ie,b8 as vt,g7 as yt,g9 as ft,kc as _t,kd as xt,nJ as wt,rU as $t,qG as ke,qz as J,oO as Tt,rV as Qe,gC as Ye,cU as bt,cT as Ot,c4 as Je,kQ as Vt,A as St,M as _,rW as Mt,d0 as Ct,rX as Rt,c_ as It,ah as Te,rY as Lt,Q as C,v as Dt,a8 as kt,bi as A,B as r,D as l,E as x,F as Ke,nS as Pe,nT as be,rZ as Pt,gl as ne,ay as le,nU as h,_ as F,a7 as Q,e4 as pe,r_ as zt,r$ as Gt,nc as Et,it as Wt,s0 as et,s1 as Ut,cz as Ft,k8 as Oe,k9 as ze,gM as Ht,nd as Zt,s2 as At,js as qt,V as jt,s3 as tt,s4 as it,bT as Bt,mB as Xt,lT as Nt,aw as Qt,nu as Ve,nf as Yt,lX as Jt,z as Kt,lo as Ge,eD as nt,my as ei}from"./vendor.fe24faac.js";import{simplify as ti,distance as ii,geodesicArea as ni,geodesicLength as st}from"./geometryEngine.8edba19c.js";import{c as si,p as se}from"./InteractiveToolBase.e7b97dce.js";import{a as K,o as R}from"./quantityUtils.4cba5101.js";import{x as oi,S as ai,g as ri,p as li}from"./EditGeometryOperations.c53784d5.js";import{e as Ee}from"./SnappingContext.fb20e8e2.js";import{Z as ce,x as pi,a as ci,f as hi,y as We,d as di,h as ui}from"./euclideanLengthMeasurementUtils.a8ef0d06.js";import{x as Ue,F as gi,S as mi,k as vi,z as yi,U as ot,q as fi}from"./quantityFormatUtils.afcc4c0f.js";import{d as at,j as _i,h as xi}from"./euclideanAreaMeasurementUtils.7e82b323.js";function Y(e,t,i=null){return p(i)?[e,t,i]:[e,t]}function m(e,t,i=null){return p(i)?{x:e,y:t,z:i}:{x:e,y:t}}class rt{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return J(t.map(i=>this.mapToLocal(i)))}get doUnnormalization(){return!1}}class wi extends rt{constructor(t,i,n=null){super(i),this.defaultZ=n,this.transform=Le(),this.transformInv=Le(),this.transform=gt(t),mt(this.transformInv,this.transform)}makeMapPoint(t,i){return Y(t,i,this.defaultZ)}mapToLocal(t){return m(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return Y(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class $i extends rt{constructor(t,i){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=V(),this.tangentFrameUpWS=V(),this.tangentFrameRightWS=V(),this.tangentFrameForwardWS=V(),this.localFrameRightWS=V(),this.localFrameUpWS=V(),this.worldToLocalTransform=De(),this.localToWorldTransform=De(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const n=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ie.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ie.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ie.Z,this.tangentFrameForwardWS);const o=V();vt(o,this.tangentFrameForwardWS,yt(n,this.tangentFrameForwardWS)),ft(this.localFrameRightWS,n,o),_t(this.localFrameRightWS,this.localFrameRightWS),xt(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),wt(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),$t(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(t,i){return Y(t,i,this.defaultZ)}mapToLocal(t){const i=V();this.view.renderCoordsHelper.toRenderCoords(new j({x:t[0],y:t[1],spatialReference:this.spatialReference}),i),ke(i,i,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return p(n)?m(n.x/this.scale,n.y/this.scale):null}localToMap(t){const i=V();this.view.renderCoordsHelper.toRenderCoords(new j({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),i),ke(i,i,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return p(n)?Y(n.x,n.y,this.defaultZ):null}}function Fe(e,t){if(e.type==="2d")return new wi(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if(e.type==="3d"){const i=t.length>2?new j({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new j({x:t[0],y:t[1],spatialReference:e.spatialReference});return new $i(e,i)}return null}function He(e,t){const i=new j({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(i.z=e[2]),i}function Ti(e,t){return new bt({points:e,spatialReference:t})}function Ze(e,t,i){const n=new Ot({paths:e,spatialReference:t});return i&&Qe(n),n}function Z(e,t,i,n=!0){const o=Je(e);o.forEach(a=>{const d=a[0],c=a[a.length-1];Vt(d,c)&&a.length!==1||a.push(a[0])});let s=new St({rings:o,spatialReference:t});return s.rings.forEach(a=>{Tt(a,!1,!1)||a.reverse()}),i&&Qe(s),n&&s.isSelfIntersecting&&Ye(t)&&(s=ti(s)),s}function Ae(e,t,i){const n=t.mapToLocalMultiple(e),o=[],s={x:n[0].x,y:n[0].y},a={x:n[1].x,y:n[1].y},d=Math.round(a.x-s.x),c=Math.round(a.y-s.y),u=Math.max(Math.abs(d),Math.abs(c));if(i){const g={x:s.x+u,y:s.y+u},b={x:s.x-u,y:s.y-u};o.push(m(g.x,b.y),m(b.x,b.y),m(b.x,g.y),m(g.x,g.y))}else{const g={x:d>0?s.x+u:s.x-u,y:c>0?s.y+u:s.y-u};o.push(m(s.x,s.y),m(g.x,s.y),m(g.x,g.y),m(s.x,g.y))}return Z([J(o.map(g=>t.localToMap(g)))],t.spatialReference,t.doUnnormalization,!0)}function bi(e,t,i){let n=t.mapToLocalMultiple(e);if(n.length===1){const c=n[0];n=[m(c.x-48,c.y+48),m(c.x+48,c.y-48),m(c.x+48,c.y-48),m(c.x-48,c.y+48)]}const o=[],s={x:n[0].x,y:n[0].y},a={x:n[1].x,y:n[1].y};if(i){const d=Math.round(a.x-s.x),c=Math.round(a.y-s.y);o.push(m(s.x-d,s.y-c),m(a.x,s.y-c),m(a.x,a.y),m(s.x-d,a.y))}else o.push(m(s.x,s.y),m(a.x,s.y),m(a.x,a.y),m(s.x,a.y));return Z([J(o.map(d=>t.localToMap(d)))],t.spatialReference,t.doUnnormalization,!0)}function qe(e,t,i,n){const o=t.mapToLocalMultiple(e);let s=null,a=null;if(i)s=o[0],a=o[1];else{const $=o[0],L=o[1],P=Math.round(L.x-$.x),z=Math.round(L.y-$.y),G=Math.max(Math.abs(P),Math.abs(z));s=m(P>0?$.x+G/2:$.x-G/2,z>0?$.y+G/2:$.y-G/2),a=m(Math.abs(P)>Math.abs(z)?s.x-G/2:s.x,Math.abs(P)>Math.abs(z)?s.y:s.y-G/2)}const d=t.localToMap(s),c=t.localToMap(a);if(_(d)||_(c))return null;t.doUnnormalization&&Mt([[d,c]],t.spatialReference);const u=He(d,t.spatialReference),g=He(c,t.spatialReference),b=Ct(t.spatialReference);let O=0;if(Ye(t.spatialReference))O=b*ii(u,g,null);else{const $=s.x-a.x,L=s.y-a.y;O=b*Math.sqrt($*$+L*L)*(n||1)}const S=new Rt({center:u,radius:O,radiusUnit:"meters",spatialReference:t.spatialReference});return Z(S.rings,S.spatialReference,!1)}function Oi(e,t,i){const n=t.mapToLocalMultiple(e),o=n[0],s=n[1],a=Math.round(s.x-o.x),d=Math.round(s.y-o.y),c=m(i?o.x:o.x+a/2,i?o.y:o.y+d/2),u=i?a:a/2,g=i?d:d/2,b=60,O=[],S=2*Math.PI/b;for(let $=0;$<b;$++){const L=Math.cos($*S),P=Math.sin($*S),z=m(u*L+c.x,g*P+c.y);O.push(z)}return O.push(O[0]),Z([J(O.map($=>t.localToMap($)))],t.spatialReference,t.doUnnormalization,!1)}let T=class extends It(Te.EventedMixin(si)){constructor(e){super(e),this._graphic=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.mode=null,this.snappingManager=null,this.snapToScene=!1}initialize(){this.internalGraphicsLayer=new Lt({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",e=>this.onVertexAdd(e)),this.drawOperation.on("vertex-remove",e=>this.onVertexRemove(e)),this.drawOperation.on("vertex-update",e=>this.onVertexUpdate(e)),this.drawOperation.on("cursor-update",e=>this.onCursorUpdate(e)),this.drawOperation.on("complete",e=>this.onComplete(e))]),this.finishToolCreation()}destroy(){this.drawOperation=C(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=C(this.internalGraphicsLayer),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),p(this._graphic)&&(this._graphic.symbol=e)}get updating(){var e,t;return(t=(e=this.drawOperation)==null?void 0:e.updating)!=null?t:!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(e){this._graphic=new Dt(E(M({},this.graphicProperties),{geometry:e,symbol:this.graphicSymbol})),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(kt(()=>{p(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=C(this._graphic))}),oe)}_destroyAllVisualisations(){this.handles.remove(I.outline),this.handles.remove(I.regularVertices),this.handles.remove(I.activeVertex),this.handles.remove(oe)}_getCreateOperationGeometry(e={operationComplete:!1}){if(this.drawOperation==null||this.drawOperation.numVertices===0)return null;const t=this.drawOperation.stagedVertex,i=this.drawOperation.committedVertices,n=i.slice();p(t)&&n.push(this.drawOperation.coordinateHelper.pointToArray(t));const o=p(t)?this.drawOperation.coordinateHelper.pointToArray(t):i.splice(-1)[0],s={regularVertices:null,activeVertex:null,full:null,outline:null},a=n.length,d=this.view.spatialReference,c=this.view.type==="3d"&&this.view.viewingMode==="global";switch(this.geometryType){case"point":s.regularVertices=i,s.activeVertex=o,s.full=this.drawOperation.coordinateHelper.arrayToPoint(n[0]);break;case"multipoint":s.regularVertices=i,s.activeVertex=o,a>0&&(s.full=Ti(n,d));break;case"polyline":s.regularVertices=i,s.activeVertex=o,a>0&&(s.full=Ze([n],d,c));break;case"polygon":s.regularVertices=i,s.activeVertex=o,a>0&&(s.full=Z([n],d,c,!0));break;case"circle":if(a>0){const u=Fe(this.view,n[0]);if(a===1&&e.operationComplete){const g=n[0],b=u.makeMapPoint(g[0]+je*this.view.resolution,g[1]);s.full=qe([g,b],u,!0)}else a===2&&(s.full=this.forceUniformSize?qe(n,u,this.centered):Oi(n,u,this.centered))}break;case"rectangle":if(a>0){const u=Fe(this.view,n[0]);if(a===1&&e.operationComplete){const g=n[0],b=u.makeMapPoint(g[0]+je*this.view.resolution,g[1]);s.full=Ae([g,b],u,!0)}else a===2&&(s.full=this.forceUniformSize?Ae(n,u,this.centered):bi(n,u,this.centered))}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":a>1&&(s.outline=Ze([n],d,c));break;case"circle":case"rectangle":p(s.full)&&s.full.type==="polygon"&&(s.outline=Z(s.full.rings,d,c))}return s}initializeGraphic(e){return null}onComplete(e){this._updateGraphic();let t=null;if(this.drawOperation.isCompleted){const i=this._getCreateOperationGeometry({operationComplete:!0});p(i)&&(_(this._graphic)?this._createGraphic(i.full):this._graphic.geometry=i.full,t=A(this._graphic).clone())}this.emit("complete",M({graphic:t},e))}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(e){this._updateGraphic(),this.emit("vertex-add",e)}onVertexRemove(e){this._updateGraphic(),this.emit("vertex-remove",e)}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e)}_updateGraphic(){const e=this._getCreateOperationGeometry();_(e)?this._destroyAllVisualisations():(p(e.outline)?this.handles.add(this.onOutlineChanged(e.outline),I.outline):this.handles.remove(I.outline),p(e.regularVertices)?this.handles.add(this.onRegularVerticesChanged(e.regularVertices),I.regularVertices):this.handles.remove(I.regularVertices),p(e.activeVertex)?this.handles.add(this.onActiveVertexChanged(e.activeVertex),I.activeVertex):this.handles.remove(I.activeVertex),p(e.full)?_(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full:this.handles.remove(oe))}};r([l({value:!0})],T.prototype,"centered",null),r([l({nonNullable:!0})],T.prototype,"defaultZ",void 0),r([l()],T.prototype,"drawOperation",void 0),r([l({value:!0})],T.prototype,"enabled",null),r([l({value:!0})],T.prototype,"forceUniformSize",null),r([l({constructOnly:!0})],T.prototype,"geometryType",void 0),r([l()],T.prototype,"graphic",null),r([l({constructOnly:!0})],T.prototype,"graphicProperties",void 0),r([l()],T.prototype,"graphicSymbol",null),r([l({constructOnly:!0})],T.prototype,"hasZ",void 0),r([l({constructOnly:!0})],T.prototype,"mode",void 0),r([l()],T.prototype,"snappingManager",void 0),r([l()],T.prototype,"snapToScene",void 0),r([l({readOnly:!0})],T.prototype,"type",void 0),r([l({readOnly:!0})],T.prototype,"updating",null),r([l({constructOnly:!0,nonNullable:!0})],T.prototype,"view",void 0),T=r([x("esri.views.draw.DrawGraphicTool")],T);const oe="create-operation-graphic",I={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function _n(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment";default:return null}}const je=48,lt="click";class Vi{constructor({grabbableForEvent:t}){this.events=new Te,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,i){return 0}attach(){}detach(){}}let H=class extends Ke{constructor(e){super(e)}};r([l()],H.prototype,"tooltipOptions",void 0),H=r([x("esri.views.interactive.tooltip.SketchTooltipInfo")],H);let q=class extends H{constructor(e){super(e),this.type="draw-point"}};r([l()],q.prototype,"type",void 0),r([l()],q.prototype,"elevation",void 0),q=r([x("esri.views.interactive.tooltip.DrawPointTooltipInfo")],q);let W=class extends H{constructor(e){super(e),this.type="draw-polyline"}};r([l()],W.prototype,"type",void 0),r([l()],W.prototype,"elevation",void 0),r([l()],W.prototype,"totalLength",void 0),W=r([x("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],W);let U=class extends H{constructor(e){super(e),this.type="draw-polygon"}};r([l()],U.prototype,"type",void 0),r([l()],U.prototype,"elevation",void 0),r([l()],U.prototype,"area",void 0),U=r([x("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],U);const ee="esri-tooltip",y=`${ee}-content`;let w=class extends be{constructor(){super(...arguments),this._messagesUnits=null,this._messagesTooltip=null}get _units(){const e=Pt(this.tooltip.view);return{length:e,verticalLength:e,area:e}}_formatScale(e){return ne(e,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(e){return ne(e,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(e,t,i){return Ue(this._messagesUnits,e,le(t,this._units.length),i)}_formatRelativeLength(e){return gi(this._messagesUnits,e,this._units.length)}_formatVerticalLength(e){return mi(this._messagesUnits,e,this._units.verticalLength)}_formatRelativeVerticalLength(e){return vi(this._messagesUnits,e,this._units.verticalLength)}_formatTotalLength(e){return Ue(this._messagesUnits,e,this._units.length)}_formatArea(e){return yi(this._messagesUnits,e,this._units.area)}_formatPercentage(e){return ne(e.value,{style:"percent"})}};r([l()],w.prototype,"info",void 0),r([l()],w.prototype,"tooltip",void 0),r([l()],w.prototype,"_units",null),r([Pe("esri/core/t9n/Units"),l()],w.prototype,"_messagesUnits",void 0),r([Pe("esri/views/interactive/tooltip/t9n/Tooltip"),l()],w.prototype,"_messagesTooltip",void 0),w=r([x("esri.views.interactive.tooltip.content.TooltipContent")],w);const ae=`${ee}-field`,re={base:ae,title:`${ae}__title`,value:`${ae}__value`};let v=class extends be{render(){return h("div",{class:re.base},h("div",{class:re.title},this.title),h("div",{class:re.value},this.value))}};r([l()],v.prototype,"title",void 0),r([l()],v.prototype,"value",void 0),v=r([x("esri.views.interactive.tooltip.support.TooltipField")],v);const Si={base:`${y} ${`${y}--draw-point`}`};let he=class extends w{render(){var i;const{elevation:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:Si.base},h(v,{title:t==null?void 0:t.elevation,value:this._formatVerticalLength(e)}))}};he=r([x("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],he);const Mi={base:`${y} ${`${y}--draw-polygon`}`};let de=class extends w{render(){var n;const{area:e,elevation:t}=this.info,i=(n=this._messagesTooltip)==null?void 0:n.sketch;return h("div",{class:Mi.base},h(v,{title:i==null?void 0:i.elevation,value:this._formatVerticalLength(t)}),h(v,{title:i==null?void 0:i.area,value:this._formatArea(e)}))}};de=r([x("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],de);const Ci={base:`${y} ${`${y}--draw-polyline`}`};let ue=class extends w{render(){var n;const{elevation:e,totalLength:t}=this.info,i=(n=this._messagesTooltip)==null?void 0:n.sketch;return h("div",{class:Ci.base},h(v,{title:i==null?void 0:i.elevation,value:this._formatVerticalLength(e)}),h(v,{title:i==null?void 0:i.totalLength,value:this._formatLength(t)}))}};ue=r([x("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],ue);const Ri={base:`${y} ${`${y}--extent-rotate`}`};let ge=class extends w{render(){var i;const{angle:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:Ri.base},h(v,{title:t==null?void 0:t.rotation,value:this._formatRelativeOrientation(e)}))}};ge=r([x("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],ge);const Ii={base:`${ee}-value-by-value`};let k=class extends be{constructor(){super(...arguments),this.divider="\xD7"}render(){return h("div",{class:Ii.base},h("span",null,this.left),h("span",null,this.divider),h("span",null,this.right))}};r([l()],k.prototype,"left",void 0),r([l()],k.prototype,"divider",void 0),r([l()],k.prototype,"right",void 0),k=r([x("esri.views.interactive.tooltip.support.ValueByValue")],k);const Li={base:`${y} ${`${y}--extent-scale`}`};let me=class extends w{render(){var s;const{xScale:e,yScale:t,xSize:i,ySize:n}=this.info,o=(s=this._messagesTooltip)==null?void 0:s.sketch;return h("div",{class:Li.base},h(v,{title:o==null?void 0:o.size,value:h(k,{left:this._formatLength(i),right:this._formatLength(n)})}),h(v,{title:o==null?void 0:o.scale,value:h(k,{left:this._formatScale(e),right:this._formatScale(t)})}))}};me=r([x("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],me);const Di={base:`${y} ${`${y}--reshape-edge-offset`}`};let ve=class extends w{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:Di.base},h(v,{title:t==null?void 0:t.distance,value:this._formatRelativeLength(e)}))}};ve=r([x("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],ve);const ki={base:`${y} ${`${y}--reshape-move-graphic`}`};let ye=class extends w{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:ki.base},h(v,{title:t==null?void 0:t.distance,value:this._formatLength(e)}))}};ye=r([x("esri.views.interactive.tooltip.content.TooltipContentReshapeMoveGraphic")],ye);const Pi={base:`${y} ${`${y}--transform-absolute`}`};let fe=class extends w{render(){var u;const{orientation:e,orientationEnabled:t,orientationPrecision:i,rotationType:n,size:o,sizeEnabled:s,sizeUnit:a,sizePrecision:d}=this.info,c=(u=this._messagesTooltip)==null?void 0:u.sketch;return h("div",{class:Pi.base},t&&h(v,{title:c==null?void 0:c.orientation,value:ot(e,n,i)}),s&&h(v,{title:c==null?void 0:c.size,value:this._formatLength(o,a,d)}))}};fe=r([x("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],fe);const zi={base:`${y} ${`${y}--transform-rotate`}`};let _e=class extends w{render(){var a;const{rotation:e,rotationPrecision:t,orientation:i,orientationPrecision:n,rotationType:o}=this.info,s=(a=this._messagesTooltip)==null?void 0:a.sketch;return h("div",{class:zi.base},h(v,{title:s==null?void 0:s.rotation,value:fi(e,o,t)}),h(v,{title:s==null?void 0:s.orientation,value:ot(i,o,n)}))}};_e=r([x("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],_e);const Gi={base:`${y} ${`${y}--transform-scale`}`};let xe=class extends w{render(){var s;const{scale:e,size:t,sizePrecision:i,sizeUnit:n}=this.info,o=(s=this._messagesTooltip)==null?void 0:s.sketch;return h("div",{class:Gi.base},h(v,{title:o==null?void 0:o.scale,value:this._formatPercentage(e)}),h(v,{title:o==null?void 0:o.size,value:this._formatLength(t,n,i)}))}};xe=r([x("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],xe);const Ei={base:`${y} ${`${y}--translate-vertex`}`};let we=class extends w{render(){var s;const{area:e,distance:t,elevation:i,totalLength:n}=this.info,o=(s=this._messagesTooltip)==null?void 0:s.sketch;return h("div",{class:Ei.base},h(v,{title:o==null?void 0:o.distance,value:this._formatLength(t)}),p(i)&&h(v,{title:o==null?void 0:o.elevation,value:this._formatVerticalLength(i)}),p(e)&&h(v,{title:o==null?void 0:o.area,value:this._formatArea(e)}),p(n)&&h(v,{title:o==null?void 0:o.totalLength,value:this._formatLength(n)}))}};we=r([x("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],we);const Wi={base:`${y} ${`${y}--extent-move-z`}`};let $e=class extends w{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:Wi.base},h(v,{title:t==null?void 0:t.distance,value:this._formatRelativeVerticalLength(e)}))}};$e=r([x("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],$e);function Ui(e,t){if(_(t))return null;const i=document.createElement("div");switch(t.type){case"draw-point":return new he({tooltip:e,info:t,container:i});case"draw-polygon":return new de({tooltip:e,info:t,container:i});case"draw-polyline":return new ue({tooltip:e,info:t,container:i});case"extent-rotate":return new ge({tooltip:e,info:t,container:i});case"extent-scale":return new me({tooltip:e,info:t,container:i});case"reshape-edge-offset":return new ve({tooltip:e,info:t,container:i});case"transform-absolute":return new fe({tooltip:e,info:t,container:i});case"transform-rotate":return new _e({tooltip:e,info:t,container:i});case"transform-scale":return new xe({tooltip:e,info:t,container:i});case"translate-graphic":return new ye({tooltip:e,info:t,container:i});case"translate-vertex":return new we({tooltip:e,info:t,container:i});case"translate-z":return new $e({tooltip:e,info:t,container:i})}}const Fi={base:`${ee}`};let D=class extends Ke{constructor(e){super(e),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(Fi.base),t})(),this._contentWidget=null}initialize(){const e=this._contentContainer;this.own([F(()=>{var t;return(t=this.view.overlay)==null?void 0:t.surface},t=>{e.remove(),pe(t,i=>i.appendChild(e))},Q),F(()=>this.info,(t,i)=>{p(this._contentWidget)&&p(t)&&p(i)&&t.type===i.type?this._contentWidget.info=t:(this._contentWidget=C(this._contentWidget),pe(Ui(this,t),n=>{this._contentWidget=n,e.appendChild(n.container)}))},Q),F(()=>{var t;return{container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:(t=this.view.inputManager)==null?void 0:t.latestPointerLocation}},Hi,Q)])}destroy(){this._contentWidget=C(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get test(){return{contentContainer:this._contentContainer}}};function Hi({container:e,contentWidget:t,screenPoint:i}){const{style:n}=e;if(p(i)&&p(t)){n.display="block";const o=zt(e),s=`translate(${Math.round(i.x)+Be[0]*(o?-1:1)}px, ${Math.round(i.y)+Be[1]}px)`;n.transform=o?`translate(-100%, 0) ${s}`:s}else n.display="none"}r([l({nonNullable:!0})],D.prototype,"view",void 0),r([l()],D.prototype,"info",void 0),r([l()],D.prototype,"_contentContainer",void 0),r([l()],D.prototype,"_contentWidget",void 0),D=r([x("esri.views.interactive.tooltip.Tooltip")],D);const Be=[20,20];function Se(e,t,i,n,...o){return Gt(e)&&Et(e)?t.apply(void 0,o):Wt(e)?i.apply(void 0,o):n.apply(void 0,o)}function Zi(e){const{spatialReference:t}=e;return Se(t,Ai,qi,ji,e)}function Ai(e){return K(Math.abs(et([e],"square-meters")[0]),"square-meters")}function qi(e){try{return K(Math.abs(ni(e,"square-meters")),"square-meters")}catch{return null}}function ji(e){const t=[];return Ut(e,t)?K(Math.abs(et([{type:"polygon",rings:t,spatialReference:Ft.WGS84}],"square-meters")[0]),"square-meters"):null}function Bi(e,t,i=at()){if(t){const n=Zi(e);return p(n)?n:_i(e,i)}return xi(e,i)}function Xi(e){const{spatialReference:t}=e;return Se(t,Ki,en,tn,e)}function Ni(e,t){if(!Ht(e.spatialReference,t.spatialReference))return null;const{spatialReference:i}=e;return B[0]=e.x,B[1]=e.y,B[2]=e.hasZ?e.z:0,X[0]=t.x,X[1]=t.y,X[2]=t.hasZ?t.z:0,Me(B,X,i)}function Me(e,t,i){return Se(i,Qi,Yi,Ji,e,t,i)}function Qi(e,t,i){return R(Oe(Ce,e,t,i).distance,"meters")}function Yi(e,t,i){return R(st(nn(e,t,i),"meters"),"meters")}function Ji(e,t,i){return ze(e,i,Xe)&&ze(t,i,Ne)?R(Oe(Ce,Xe,Ne).distance,"meters"):null}function Ki(e){return R(Zt([e],"meters")[0],"meters")}function en(e){return R(st(e,"meters"),"meters")}function tn(e){const t=[];if(!At(e,t))return null;let i=0;for(const n of t){let o=0;for(let s=1;s<n.length;++s)o+=Oe(Ce,n[s-1],n[s]).distance;i+=o}return R(i,"meters")}function nn(e,t,i){return{type:"polyline",spatialReference:i,paths:[[[...e],[...t]]]}}const Ce={distance:null},B=V(),X=V(),Xe=V(),Ne=V();function sn(e,t){return te(hi,Xi,ci,t,e)}function on(e,t,i,n){return te(pi,Me,ce,n,e,t,i)}function xn(e,t,i){return te(We,Ni,We,i,e,t)}function wn(e,t,i,n){return te(ce,Me,ce,n,e,t,i)}function te(e,t,i,n,...o){if(n==="on-the-ground"){const s=t.apply(void 0,o);return p(s)?s:i.apply(void 0,o)}return e.apply(void 0,o)}function an(e,t){var u,g,b;const i=O=>sn(O,t),n=(O,S,$)=>on(O,S,$,t),o=i(e),s=(b=(g=e.paths[0])==null?void 0:g[((u=e.paths[0])==null?void 0:u.length)-1])!=null?b:null,{hasZ:a,spatialReference:d}=e,c=s?qt(s[0],s[1],a?s[2]:0):null;return O=>{if(_(O)||_(o)||_(c))return o;N[0]=O.x,N[1]=O.y,N[2]=a?O.z:0;const S=n(c,N,d);return _(S)?o:R(o.value+S.value,o.unit)}}function rn(e,t){const i=at(),n=o=>Bi(o,t,i);return o=>{if(_(o)||e.rings.length<1||e.rings[0].length<2)return n(e);const s=e.clone();return s.rings[0].push([o.x,o.y]),n(s)}}const N=V();let f=class extends Te.EventedMixin(jt){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new di,this._tooltip=null,this._tooltipContext={calculateElevation:null,calculateTotalLength:null,calculateArea:null},this.isDraped=!0,this.labelOptions=new tt,this.tooltipOptions=new it,this.snapToSceneEnabled=null,_(e.elevationInfo)&&(this.elevationInfo={mode:e.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){const{geometryType:e,view:t}=this,{spatialReference:i}=t,n="viewingMode"in t.state?t.state.viewingMode:Bt.Local,o=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=oi(this.hasZ,this.hasM,i),this._editGeometryOperations=new ai(new ri(o,this.coordinateHelper)),this._snappingOperation=new ui({view:t}),this.handles.add(F(()=>this.stagedVertex,(a,d)=>{p(this._tooltip)&&(p(d)!==p(a)?this._tooltip.info=this._getTooltipInfo():this._updateTooltipInfo()),_(a)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(a)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(a,d)=>Yt(a,d,Jt)})),this._activeComponent=new li(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const s=this.segmentLabels;p(s)&&(s.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([F(()=>this.labelOptions.enabled,a=>{s.visible=a},Q),this.on("cursor-update",()=>{const a=this.stagedVertex;s.stagedVertex=p(a)?this.coordinateHelper.pointToVector(a):null})])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],a=>{const d=a.vertices.map(u=>({componentIndex:0,vertexIndex:u.index,coordinates:this.coordinateHelper.vectorToArray(u.pos)})),c=d.map(u=>u.coordinates);switch(a.type){case"vertex-add":this.emit(a.type,E(M({},a),{added:c,vertices:d}));break;case"vertex-update":this.emit(a.type,E(M({},a),{updated:c,vertices:d}));break;case"vertex-remove":this.emit(a.type,E(M({},a),{removed:c,vertices:d}))}})),this._manipulator=new Vi({grabbableForEvent:a=>this.drawingMode!=="click"||a.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1}),this.manipulators.add(this._manipulator),this._manipulator.grabbable=e!=="point",this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",a=>this._onImmediateClick(a)),this._manipulator.events.on("immediate-double-click",a=>this._onImmediateDoubleClick(a)),F(()=>this.tooltipOptions.enabled,a=>{this._tooltip=a?new D({view:t,info:this._getTooltipInfo()}):C(this._tooltip)},Kt),this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],()=>pe(this._tooltip,a=>{a.info=this._getTooltipInfo()}))])}destroy(){C(this.segmentLabels),C(this._snappingOperation),this._tooltip=C(this._tooltip),this._editGeometryOperations=C(this._editGeometryOperations)}get _snappingEnabled(){return p(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _defaultElevation(){return R(this.defaultZ,"meters")}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}set drawingMode(e){this._set("drawingMode",e!=null?e:lt)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return p(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=Je(e)}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return p(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}get stagedOrLastVertex(){if(p(this.stagedVertex))return this.stagedVertex;const e=this._activeComponent.getLastVertex();return _(e)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(e.pos)}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),p(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),p(this.snappingManager)&&this.snappingManager.doneSnapping(),this.geometryType==="segment"||this.geometryType==="point"?this.commitStagedVertex():this.stagedVertex=null;const i=this.geometryType==="multipoint"&&this.numVertices===0||this.geometryType==="polyline"&&this.numVertices<2||this.geometryType==="polygon"&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map((n,o)=>({componentIndex:0,vertexIndex:o,coordinates:n})),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){p(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if(this.geometryType==="polygon"&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(A(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return se(e,(t,i,n,o)=>{const s=o==="touch"&&this._snappingEnabled;!this.isCompleted&&s&&(i.next(this._screenToMapDragEventStep()).next(a=>(a.action==="start"&&(this.stagedVertex=a.mapStart,(this.geometryType==="segment"||s&&this.numVertices===0)&&this.commitStagedVertex()),a)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>s,cancel:n,snappingManager:this.snappingManager,snappingContext:new Ee({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:o,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(a=>(s&&(this.stagedVertex=a.mapEnd,a.action==="end"&&this.commitStagedVertex()),a)).next(a=>(a.action==="end"&&(this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),a)),n.next(()=>{s&&p(this.snappingManager)&&this.snappingManager.doneSnapping()}))})}_createManipulatorDragPipelineFreehand(e){return se(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(_(this.stagedVertex)&&(this.stagedVertex=n.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this.stagedVertex=n.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return n})})}_createManipulatorDragPipelineHybrid(e){return se(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(_(this.stagedVertex)&&(this.stagedVertex=n.mapStart),this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this.stagedVertex=n.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return n})})}_getDrawSurface(){if(_(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;p(this.elevationInfo)&&this.elevationInfo.mode==="absolute-height"&&(t=!0),p(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),p(this.elevationInfo)&&this.elevationInfo.mode==="on-the-ground"&&(t=!1);const i=this._activeComponent.vertices.length;return(this.geometryType==="segment"||this.geometryType==="polygon")&&i>0&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(p(i))return e.stopPropagation(),void this.complete();const n=this._screenToMap(e.screenPoint);if(p(n))switch(this.drawingMode){case"freehand":this.geometryType==="point"&&(p(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),p(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),(this.geometryType==="point"||this.geometryType==="segment"&&t.vertices.length===2||this.geometryType==="segment"&&this.drawingMode==="hybrid"&&t.vertices.length===1)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=Xt(e.x,e.y);if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void this._snappingOperation.abort();e.stopPropagation();const i=this._closeOnClickVertexIndex(t);if(p(i))return this._closeOnVertex(i),void this._snappingOperation.abort();const n=this._screenToMap(t);if(this._manipulator.cursor=p(n)?"crosshair":null,_(n))return void this._snappingOperation.abort();if(_(this.snappingManager))return this.stagedVertex=n,void this._snappingOperation.abort();const o=this.snappingManager,s=new Ee({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise(Nt(this._snappingOperation.snap(n,o,s)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if(t.action==="start"&&(e=this._screenToMap(t.screenStart)),_(e))return null;const i=this._screenToMap(t.screenEnd);return p(i)?E(M({},t),{mapStart:e,mapEnd:i}):null}}_vertexWithinPointerDistance(e,t){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!p(n)&&ln(n,t,25)}_calculateVertexTooltipElevation(e){const{tooltipOptions:t,view:i}=this;if(_(e)||i.type==="2d")return this._defaultElevation;const n=this.elevationInfo,o=t.elevation.mode,{spatialReference:s}=e,a=Qt(s),d=Ve(i,e,n,{mode:o,offset:0});return R(d*a,"meters")}_getTooltipInfo(){const{tooltipOptions:e,stagedOrLastVertex:t}=this;if(_(t))return null;this._tooltipContext.calculateElevation=n=>this._calculateVertexTooltipElevation(n);const i=this._elevationTooltipDetail(t);switch(this.geometryType){case"point":return new q({tooltipOptions:e,elevation:i});case"polyline":return this._tooltipContext.calculateTotalLength=an(this._editGeometryOperations.data.geometry,this.isDraped?"on-the-ground":"absolute-height"),new W({tooltipOptions:e,elevation:i,totalLength:this._totalLengthTooltipDetail(t)});case"polygon":return this._tooltipContext.calculateArea=rn(this._editGeometryOperations.data.geometry,this.isDraped),new U({tooltipOptions:e,elevation:i,area:this._areaTooltipDetail(t)});default:return null}}_elevationTooltipDetail(e){return M({mode:this.elevationInfo.mode},A(this._tooltipContext.calculateElevation)(e))}_totalLengthTooltipDetail(e){return M({},le(A(this._tooltipContext.calculateTotalLength)(e),R(0,"meters")))}_areaTooltipDetail(e){return M({},le(A(this._tooltipContext.calculateArea)(e),K(0,"square-meters")))}_updateTooltipInfo(){const e=this._tooltip;if(_(e))return;const{stagedOrLastVertex:t}=this,i=this._elevationTooltipDetail(t);switch(this.geometryType){case"point":e.info.elevation=i;break;case"polyline":{const n=e.info;n.elevation=i,n.totalLength=this._totalLengthTooltipDetail(t);break}case"polygon":{const n=e.info;n.elevation=i,n.area=this._areaTooltipDetail(t);break}}}get test(){return{tooltip:this._tooltip}}};function ln(e,t,i){const n=e.x-t.x,o=e.y-t.y;return n*n+o*o<=i}r([l()],f.prototype,"_defaultElevation",null),r([l()],f.prototype,"defaultZ",void 0),r([l()],f.prototype,"isDraped",void 0),r([l({value:lt})],f.prototype,"drawingMode",null),r([l({constructOnly:!0})],f.prototype,"elevationDrawSurface",void 0),r([l({constructOnly:!0})],f.prototype,"elevationInfo",void 0),r([l({constructOnly:!0,type:tt})],f.prototype,"labelOptions",void 0),r([l({constructOnly:!0,type:it})],f.prototype,"tooltipOptions",void 0),r([l({constructOnly:!0})],f.prototype,"geometryType",void 0),r([l({constructOnly:!0})],f.prototype,"hasM",void 0),r([l({constructOnly:!0})],f.prototype,"hasZ",void 0),r([l({constructOnly:!0})],f.prototype,"manipulators",void 0),r([l({constructOnly:!0})],f.prototype,"drawSurface",void 0),r([l({constructOnly:!0})],f.prototype,"segmentLabels",void 0),r([l({constructOnly:!0})],f.prototype,"snappingManager",void 0),r([l({constructOnly:!0})],f.prototype,"snappingVisualizer",void 0),r([l()],f.prototype,"snapToSceneEnabled",void 0),r([l()],f.prototype,"_snappingOperation",void 0),r([l()],f.prototype,"stagedVertex",null),r([l()],f.prototype,"updating",null),r([l({constructOnly:!0})],f.prototype,"view",void 0),f=r([x("esri.views.draw.DrawOperation")],f);class $n{constructor(t,i,n,o=null){this.elevationInfo=t,this.defaultZ=i,this.view=n,this.excludeGraphics=o}screenToMap(t){if(p(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Ge(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const i=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Ge(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return p(i)&&(i.z=void 0),i}mapToScreen(t){const i=nt(t.x,t.y,Ve(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(i)}}class Tn{constructor(t,i,n=[]){this.view=t,this.elevationInfo=i,this.exclude=n}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return p(i)&&(i.z=ei(i,this.view,this.elevationInfo)),i}mapToScreen(t){let i=t;return p(this.elevationInfo)&&(i=nt(t.x,t.y,Ve(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(i)}}class bn{constructor(t){this.view=t,this.screenToMap=i=>t.toMap(i),this.mapToScreen=i=>t.toScreen(i)}}export{f as F,_n as G,T as _,on as a,Bi as b,bn as c,xn as d,H as e,sn as f,wn as g,Me as l,D as m,Tn as n,$n as r};
