var P=Object.defineProperty,U=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var H=(n,e,t)=>e in n?P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,f=(n,e)=>{for(var t in e||(e={}))k.call(e,t)&&H(n,t,e[t]);if(y)for(var t of y(e))F.call(e,t)&&H(n,t,e[t]);return n},E=(n,e)=>U(n,h(e));import{lZ as q,m1 as $,mt as w,mu as C,m2 as I,F as c,m3 as b,I as g,aC as d,mv as A,mw as z,lm as x,ah as G,kb as T,kR as K,az as v,iR as _,g7 as R,fE as D,mx as j,g5 as B,b6 as J,b5 as L,as as Z,at as Q,aw as V,my as M,eK as W}from"./vendor.508dc62e.js";import{G as X}from"./InteractiveToolBase.d0b67f52.js";function Y(n,e){return O(n,()=>e)}function pn(n){return O(n,e=>e.plane)}function O(n,e){const t=d(),s=d();let a=!1;return r=>{const o=e(r);if(r.action==="start"){const i=$(r.screenStart,w(C.get())),u=I(n.state.camera,i,N);c(u)&&(a=b(o,u,t))}if(!a)return null;const l=$(r.screenEnd,w(C.get())),p=I(n.state.camera,l,N);return g(p)?null:b(o,p,s)?E(f({},r),{renderStart:t,renderEnd:s,plane:o,ray:p}):null}}function nn(n,e,t,s=null,a=null){let r=null;return o=>{if(o.action==="start"&&(r=n.sceneIntersectionHelper.intersectElevationFromScreen(x(o.screenStart.x,o.screenStart.y),e,t,a),c(r)&&c(s)&&!G(r,r,s))||g(r))return null;const l=n.sceneIntersectionHelper.intersectElevationFromScreen(x(o.screenEnd.x,o.screenEnd.y),e,t,a);return c(l)?c(s)&&!G(l,l,s)?null:E(f({},o),{mapStart:r,mapEnd:l}):null}}function en(n,e,t,s=null,a=null){return nn(n,t,z(e,n,t),s,a)}function tn(n,e,t,s=null,a=null){return en(n,t,A(e),s,a)}function mn(n,e,t,s){const a=e.toMap(n.screenStart,{include:[t]});return c(a)?tn(e,t,a,s):null}function rn(n,e){const t=ln,s=on,a=_();n.renderCoordsHelper.worldUpAtPosition(e,t);const r=T(a,t,R(s,e,n.state.camera.eye));return T(r,r,t),K(e,r,a)}function fn(n,e,t){let s=null;const a=new X;return a.next(Y(n,rn(n,e))).next(sn(n,e)).next(an(n,t)).next(r=>{r.mapEnd.x=r.mapStart.x,r.mapEnd.y=r.mapStart.y,s=r}),r=>(s=null,a.execute(r),s)}function sn(n,e){const t=d(),s=D(e);n.renderCoordsHelper.worldUpAtPosition(e,t);const a=d(),r=d(),o=l=>(R(l,l,e),j(t,l,l),n.viewingMode==="global"&&D(l)*Math.sign(B(t,l))<.001-s&&R(l,J(l,t,.001),e),L(l,l,e),l);return l=>(l.renderStart=o(v(a,l.renderStart)),l.renderEnd=o(v(r,l.renderEnd)),l)}function an(n,e){const t=n.renderCoordsHelper;return s=>{const a=t.fromRenderCoords(s.renderStart,e),r=t.fromRenderCoords(s.renderEnd,e);return c(a)&&c(r)?E(f({},s),{mapStart:a,mapEnd:r}):null}}var S;function En(n){let e=null;return t=>{switch(t.action){case"start":e=n.disableDisplay();break;case"end":case"cancel":c(e)&&(e.remove(),e=null)}return t}}function Sn(n,e=null){const t=Z(n.state.viewingMode);t.options.selectionMode=!0,t.options.store=Q.MIN,t.options.hud=!1;const s=x(),a={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},r=d(),o=V(e,n.spatialReference),l=i=>{n.map.ground&&n.map.ground.opacity<1?a.exclude.add(M):a.exclude.delete(M),n.sceneIntersectionHelper.intersectIntersectorScreen($(i,s),t,a);const u=t.results.min;let m;if(u.getIntersectionPoint(r))m=u.intersector===W.TERRAIN?S.GROUND:S.OTHER;else{if(!t.results.ground.getIntersectionPoint(r))return null;m=S.GROUND}return{location:n.renderCoordsHelper.fromRenderCoords(r,o),surfaceType:m}};let p;return i=>{if(i.action==="start"){const m=l(i.screenStart);p=c(m)?m.location:null}if(g(p))return null;const u=l(i.screenEnd);return c(u)&&c(u.location)?E(f({},i),{mapStart:p,mapEnd:u.location,surfaceType:u.surfaceType}):null}}(function(n){n[n.GROUND=0]="GROUND",n[n.OTHER=1]="OTHER"})(S||(S={}));const ln=d(),on=d(),N=q();export{Sn as B,Y as C,an as F,fn as G,en as N,tn as P,pn as T,mn as h,En as z};
